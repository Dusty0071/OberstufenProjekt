<?php
function wirteHead() {
    echo '<!DOCTYPE html>
    <!-- jsn_epic_pro 6.0.9 -->
    <html lang="de-de" dir="ltr">
      <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="keywords" content="GSO, GSO Köln, GSO Koeln, Georg Simon Ohm, Georg-Simon-Ohm-Berufskolleg, Georg-Simon-Ohm-Berufsschule, Medienschule, Medienberufsschule, Köln, Fachinformatiker, Mediengestalter Bild- und Ton, Informatik, Medientechnik, Fachschule, Fachschule für Technische Informatik, Technikerfachschule, BK13, Informationstechnische Assistenten, ITAs, Berufsfachschule, Berufskolleg, Medienberufskolleg, Medientechnik, Mediengestaltung, Abendschule, Meisterbafög, Erwachsenenweiterbildung, berufliche Weiterbildung, Informatik, Informatiker, staatliche geprüfter Informatiker, Techniker Fachrichtung Informatik Schwerpunkt technische Informatik, Computertechnik, Vollzeit, Teilzeit, Abendschule, abgeschlossene Ausbildung, berufliche Weiterbildung, ohne Gebühren, kostenlos, Alternative zum Studium, Fachhochschulreife, FH-Reife, FHR, AHR, Allgemeine Hochschulreife, Förderung, " />
        <meta name="description" content="Das Georg-Simon-Ohm-Berufskolleg ist das Kölner Berufskolleg für die Bereiche Informations- und Kommunikationstechnik, Medientechnik und Mediengestaltung." />
        <title>Protokoll-Tool</title>
        <link href="img/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
        <link rel="stylesheet" href="css/template.css"/>
        <link rel="stylesheet" href="css/style.css"/>
        <link rel="stylesheet" href="css/bootstrap.css"/>
        <link rel="stylesheet" href="css/bootstrap-res.css"/>
        <link rel="stylesheet" href="css/general.css"/>
        <link rel="stylesheet" href="css/system.css"/>
        <link rel="stylesheet" href="css/blue.css"/>
        <link rel="stylesheet" href="css/template_pro.css"/>
        <link rel="stylesheet" href="css/custom.css"/>
        <link rel="stylesheet" href="css/wide.css"/>
        <style type="text/css">
          div.jsn-modulecontainer ul.menu-mainmenu ul,
          div.jsn-modulecontainer ul.menu-mainmenu ul li {
          width: 210px;
          }
          div.jsn-modulecontainer ul.menu-mainmenu ul ul {
          margin-left: 209px;
          }
          #jsn-pos-toolbar div.jsn-modulecontainer ul.menu-mainmenu ul ul {
          margin-right: 209px;
          margin-left : auto
          }
          div.jsn-modulecontainer ul.menu-sidemenu ul,
          div.jsn-modulecontainer ul.menu-sidemenu ul li {
          width: 210px;
          }
          div.jsn-modulecontainer ul.menu-sidemenu li ul {
          right: -210px;
          }
          body.jsn-direction-rtl div.jsn-modulecontainer ul.menu-sidemenu li ul {
          left: -210px;
          right: auto;
          }
          div.jsn-modulecontainer ul.menu-sidemenu ul ul {
          margin-left: 209px;
          }
          #goog-gt-tt {display:none !important;}
          .goog-te-banner-frame {display:none !important;}
          .goog-te-menu-value:hover {text-decoration:none !important;}
          body {top:0 !important;}
          #google_translate_element2 {display:none!important;}
          a.flag {font-size:16px;padding:1px 0;background-repeat:no-repeat;background-image:url("img/16a.png");}
          a.flag:hover {background-image:url("img/16.png");}
          a.flag img {border:0;}
          a.alt_flag {font-size:16px;padding:1px 0;background-repeat:no-repeat;background-image:url("img/alt_flagsa.png");}
          a.alt_flag:hover {background-image:url("img/alt_flags.png");}
          a.alt_flag img {border:0;}
        </style>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0" />
        <!-- html5.js and respond.min.js for IE less than 9 -->
        <!--[if lt IE 9]>
        <![endif]-->
      </head>
      <body id="jsn-master" class="jsn-textstyle-business jsn-color-blue jsn-direction-ltr jsn-responsive jsn-mobile jsn-joomla-25  jsn-com-content jsn-view-featured jsn-itemid-435 jsn-homepage">
        <a name="top" id="top"></a>
        <div id="jsn-page" class="container">
          <div id="jsn-page-inner">
            <div id="jsn-header">
              <div id="jsn-logo" class="pull-left">
                <a href="/index.php" title="Das Medien- und IT-Berufskolleg in Köln"><img src="img/gso-bk-logo.jpg" alt="Das Medien- und IT-Berufskolleg in Köln" id="jsn-logo-mobile" /><img src="img/gso-bk-logo.jpg" alt="Das Medien- und IT-Berufskolleg in Köln" id="jsn-logo-desktop" /></a>				
              </div>
              <div id="jsn-headerright" class="pull-right">
                <div id="jsn-pos-top" class="pull-left">
                  <div class=" jsn-modulecontainer">
                    <div class="jsn-modulecontainer_inner">
                      <div class="jsn-modulecontent">
                        <span class="jsn-menu-toggle">Menü</span>
                        <ul class="menu-topmenu menu-iconmenu">
                          <li  class="icon-display">		<a class="" href="https://github.com/Dusty0071/OberstufenProjekt" target="_blank" >
                            <span>
                            Das Projekt			</span>
                            </a>
                          </li>
                          <li class="last icon-star">
                            <a onClick="SetHeader()" style="cursor:pointer">
                            <span>
                              Special	</span>
                            </a>
                          </li>
                        </ul>
                        <div class="clearbreak"></div>
                      </div>
                    </div>
                  </div>
                  <div class="clearbreak"></div>
                </div>
              </div>
              <div class="clearbreak"></div>
            </div>
            <div id="jsn-body">
              <div id="jsn-menu">
                <div id="jsn-pos-mainmenu">
                  <div class=" jsn-modulecontainer">
                    <div class="jsn-modulecontainer_inner">
                      <div class="jsn-modulecontent">
    
                        <span class="jsn-menu-toggle">Menü</span>
                        <!-- Nav -->
                        <ul class="menu-mainmenu">
                          <li  class="current active first icon-home"><a class="current" href="index.php" title="Start here..." >
                            <span>
                            <span class="jsn-menutitle">Home</span><span class="jsn-menudescription">Start here...</span>	</span>
                            </a>
                          </li>
                          <li  class="current active first icon-home"><a class="current" href="admin.php" title="Admin" >
                            <span>
                            <span class="jsn-menutitle">Admintools</span><span class="jsn-menudescription">Admin</span>	</span>
                            </a>
                          </li>
                        </ul>
                        
                        <div class="clearbreak"></div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="clearbreak"></div>
              </div>
              <div id="jsn-content-top" class="jsn-haspromoright ">
                <div id="jsn-promo" class="row-fluid">
                  <div id="jsn-pos-promo" class="span9 order1 ">
                    <div class="display-desktop jsn-modulecontainer">
                      <div class="jsn-modulecontainer_inner">
                        <div>
                          <div>
                            <div class="jsn-modulecontent">
                              <div  >
                                <p> <br /><img src="img/gso-wall.jpg" border="0" alt="gso-wall" width="672" height="330" style="display: block; margin-left: auto; margin-right: auto;" /></p>
                              </div>
                              <div class="clearbreak"></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>';
}

function writeLogin() {
    echo '<div id="jsn-pos-promo-right" class="span3 order2 ">
    <div class="box-grey display-desktop jsn-modulecontainer">
        <div class="jsn-modulecontainer_inner">
            <div>
                <div>
                    <div class="jsn-modulecontent">
                        <div class="loginbox">
                            <p style="text-align: center;"><span style="color: #ffffff; font-size: medium;"><strong> Anmelden am Protokolltool</strong></span></p>
                            <form method="POST" action="#">
                                <input type="text" placeholder="username" />
                                <input type="password" placeholder="passwort" />
                                <input type="submit" value="Anmelden">
                            </form>
                        </div>
                        <div class="clearbreak"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>';
}

function writeHeadEnd() {
    echo '<div class="clearbreak"></div>
    </div>
    </div>
    <div id="jsn-content" class="jsn-hasright ">
        <div id="jsn-content_inner">
            <div id="jsn-content_inner1">
                <div id="jsn-content_inner2">
                    <div id="jsn-content_inner3">
                        <div id="jsn-content_inner4">
                            <div id="jsn-content_inner5">
                                <div id="jsn-content_inner6">
                                    <div id="jsn-content_inner7" class="row-fluid" style="background-color: #fff">
                                        <div id="jsn-maincontent" class="span9 order1 offset0 row-fluid">
                                            <div id="jsn-maincontent_inner">
                                                <div id="jsn-maincontent_inner1">
                                                    <div id="jsn-maincontent_inner2">
                                                        <div id="jsn-maincontent_inner3">
                                                            <div id="jsn-maincontent_inner4">
                                                                <div id="jsn-centercol" class="span12 order1 ">
                                                                    <div id="jsn-centercol_inner">
                                                                        <div id="jsn-mainbody-content" class=" jsn-hasmainbodytop jsn-hasmainbody">
                                                                            <div id="jsn-pos-mainbody-top" class="jsn-modulescontainer jsn-horizontallayout jsn-modulescontainer1 row-fluid">
                                                                                <div class=" jsn-modulecontainer span12">
                                                                                    <div class="jsn-modulecontainer_inner">
                                                                                        <div>';
}

function writeFoot() {
    echo '</div>
    </div>
</div>
</div>
<div id="jsn-mainbody">
<div id="system-message-container"></div>
<div class="com-content ">
    <div class="front-page-blog">
    </div>
</div>
</div>
</div>
</div>
</div>
<!-- end centercol -->
</div>
</div>
</div>
</div>
</div>
</div>
<!-- end jsn-maincontent -->
<div id="jsn-rightsidecontent" class="span3 order3 ">
<div id="jsn-rightsidecontent_inner">
<!-- Right Content -->
<div class="jsn-pos-right">
<div class="box-blue icon-star jsn-modulecontainer">
<div class="jsn-modulecontainer_inner">
<div>
<div>
<h3 class="jsn-moduletitle"><span class="jsn-moduleicon">Protokolltool</span></h3>
<div class="jsn-modulecontent">
<div>
<p>Made with &#10084; by:</p>
<ul>
<li>MCGD</li>
<li>newkid</li>
<li>Detlef</li>
<li>Gollnick</li>
</ul>
</div>
<div class="clearbreak"></div>
</div>
</div>
</div>
</div>
</div>
<div class="box-blue icon-star jsn-modulecontainer">
<div class="jsn-modulecontainer_inner">
<div>
<div>
<h3 class="jsn-moduletitle"><span class="jsn-moduleicon">Werbung</span></h3>
<div class="jsn-modulecontent">
<div>
<p>Hier könnte Ihre Werbung stehen.</p>
</div>
<div class="clearbreak"></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="jsn-content-bottom">
<!-- Bottom-Content -->
</div>
</div>
<div id="jsn-footer">
<!-- Footer -->
<div class="display-desktop jsn-modulecontainer">
<div class="jsn-modulecontainer_inner">
<div class="jsn-modulecontent">
<div>
<p style="text-align: center;">Das Protokolltool - Gruppe 3</p>
</div>
<div class="clearbreak"></div>
</div>
</div>
</div>
</div>
</div>
</div>
<span>Go to top</span>
</a>
<script type="text/javascript" src="js/functions.js"></script>
</body>
</html>';
}

function writeLehrerGruppeTable($gruppenLehrer){
  echo "<table class='fancy_table'><tr><th>Lehrer</th><th>Gruppe</th></tr>";
  foreach ($gruppenLehrer as $key => $value) {
    $lehrer = GetLehrer($value->LehrerID);
    $gruppe = GetGruppe($value->GruppenID);
    echo "<tr><td>".$lehrer[0]->Nachname.", ".$lehrer[0]->Vorname."</td><td>".$gruppe[0]->Name."</td></tr>";
  }
  echo"</table>";
}

function writeAdminForm($gruppen,$lehrer){
  echo "<form id='jumptoform' method='POST' action='admin.php#jumptoform'><section class='form lehrer'><h4>Lehrer anlegen:</h4><input type='text' name='vNameLehrer' placeholder='Vorname'/><input type='text' name='nNameLehrer' placeholder='Nachname'/><input type='text' name='emailLehrer' placeholder='Email'/><input type='submit' name='pushLehrer' value='Lehrer anlegen'/><ul>";
  foreach ($lehrer as $key => $value) {
    echo "<li><a class='delete-btn' style='cursor:pointer;' onclick='DeleteLehrer(".$value->ID.")'><img src='img/Loeschen.png' alt='löschen'/></a>".$value->Vorname." ".$value->Nachname."</li>";
  }
  echo "</ul></section><section class='form gruppe'><h4>Neue Gruppe anlegen:</h4><input type='text' name='nameGruppe' placeholder='Gruppenname'/><input type='text' name='verteilerGruppe' placeholder='Email Verteiler'/><input type='submit' name='pushGruppe' value='Gruppe anlegen'/><ul>";
  foreach ($gruppen as $key => $value) {
    echo "<li><a class='delete-btn' style='cursor:pointer;' onclick='DeleteGruppe(".$value->ID.")'><img src='img/Loeschen.png' alt='löschen'/></a>".$value->Name."</li>";
  }
  echo"</ul></section><section class='from gruppeLehrer'><h4>Lehrer einer Gruppe zuordnen:</h4>";
  echo "<select name='lehrerList'>";
  foreach ($lehrer as $key => $value) {
    echo " <option value=".$value->ID.">".$value->Vorname." ".$value->Nachname."</option>";
  }	
  echo "</select>";
  echo "<select name='gruppeList'>";
  foreach ($gruppen as $key => $value) {
    echo " <option value=".$value->ID.">".$value->Name."</option>";
  }	
  echo "</select><input type='submit' name='pushLehrerGruppe' value='Speichern'/></section></form>";
}

function easterEgg() {
    echo'<!-- 
                                MMMMMM=                                      
                           .MMMMMMMMMMMMMM                                   
                         MMMMMM         MMMM                                 
                      MMMMM              MMMMM.                              
                MMMMMMMM                  ?MMMM.                             
             .MMMMMMMM7MM                  MMMMM                             
             MMMMMMMMM MM                   MMMM                             
             MMMMMMMMM .MM                   MMM                             
            .MMMMMMM.   MM.M.   =MMMMMMMM.   MMM                             
             MMMMMMMM.MMMMMM.  MMMMMMMM MMM  MMM                             
             MMMMMMMMMMMM     MMMMMMMMM  MMM MMM                             
            MMM    MMM:  MM   MMMMMMMMM  MMM MMM                             
           8MM.    MMMMMMMM=  MMMMMMMM.  .M ,MM7                             
          MMMMMMMM..          MMMMM.     M  MMM                              
         .MMMMMMMMMMMMMMM       MMMMMMMMM.  MMM                              
        .MMM        MMMMMMMMMMM.           MMMM                              
        MMM                .~MMMMMMM.      MMM.                              
       MMM.                               MMMM                               
      .MMM                                MMMM                               
      MMM                                DMMM                                
     MMM                                 MMMM                                
     MMM                                .MMM                                 
    MMM                      MM        .MMM                                  
    MMM                     .MM  MM.   MMM~                                  
    MMM                     MMM .MM.   MMM                         MMMMM     
    MMM                     MM. MMM   MMM                        MMM   MMO   
    MMM                     MM  MM   .MMM                      MMMM     MM   
    MM~                    MM. MMM   MMM.                     MMM      IMM   
    MM.                    MM  MM.  .MMM                    .MMM.      MM    
    MM                     M  MMN   .MMM                   MMMM       MM.    
    MM+                   MM MMM    .MM 7MMMMMMMMMMM      MMM.       MM      
    MMM                  .M  MM      MMMMMM. .. MMMMMMM MMM.       MMM.      
    MMM                  +M MMM      MM    .MM     .MMMMMM.      .MMM.       
    ?MM                  M  MM       .      MMM      ~MM.       MMMM         
    .MM                 MM  MM            ,MMMMMMMMMMM         MMMM          
     MMM              MM     MM          MMMMMMMMMMMMMMM     MMMMM           
     MMM            .M     N  MM                  ..MMMMM.     MMMM          
     .MM             MMMM MMMMMM                     .MMMMM        DMM       
      MMM              MMMMM.MM.             ,M,       .MMM.        MM       
       MMM               M.                  MMM         MMM.  .MMMM         
       MMMM                                              MMM.    MM          
        =MMM.                            MM.             MMM      MM         
          MMMM.                          MM              MMM       M         
            MMMM                                         MMMMM,. MMM         
 .          MMMMMMM.                     MMM            MMM MMMMMM.          
 MMMM      MMN  .MMMMM                               .MMMD                   
 MM MMN  .MM    MM MMMMMMMM~ .              M.     .MMMM                     
 MM   MM$MM   MMN      MMMMMMMMMM.          M.   .MMMM                       
  M.   MMM   MM              MMMMM  MMMMMMMMM~MMMMMM                         
  MM      .MMN          .. . +MM,  8MM .MMMMMMMM.                            
   M?    NMM           MMMMMMMMM   MM                                        
   .M  .MM7            MMM MMMM   MM                                         
     MMMM              OMM       .MM                                         
      .                 MMM      MM                                          
                        .MMM    MM                                           
                         .MMD  MMM                                           
                           MMMMM?                                            
                            MMM. 
 -->';
}

function writeProtokollForm($protokoll=null, $writeOnly = true, $new = false, $emptyTop = false) {
  $Gruppen = GetGruppen();
  $Lehrer = GetAllLehrer();
  $protokollant = null;
  $Moderatoren = [];
  $Gruppe = "";
  $Topic = [];



  if($new) {
    $protokoll = new Protokoll();
  } else {
    if($protokoll !== null) {
      $Topic = $protokoll->TOPs;
    } else {
    }
  }

  if($emptyTop) {
    $Topic[count($Topic)] = new TOP();
  }

  echo '<form method="post">
    <input type="hidden" name="protokollID" value="'. $protokoll->ID .'">
    <table><tr><td>
    <label for="Typ">Titel</label></td>
    <td><input type="text" name="Typ" value="' . $protokoll->Typ . '"></td></tr>
    <tr><td>
    <label for="Raum">Raum</label></td>
    <td><input type="text" name="Raum" value="' . $protokoll->Raum . '"></td></tr>
    <tr><td>
    <label for="KonferenzDate">Konferenzdatum</label></td>
    <td><input type="datetime-local" name="KonferenzDate" value="' . $protokoll->KonferenzDate->format(HTMLDateFormat) . '"></td></tr>
    <tr><td>
    <label for="Gruppe">Gruppe</label></td>
    <td><select name="Gruppe">';
      echo '<option value="0">Benutzerdefiniert</option>';
      foreach($Gruppen as $key => $value) {
        $Gruppe = ($value->ID === $protokoll->GruppenID) ? 'selected' : '';
        echo '<option value="' . $value->ID . '" ' . $Gruppe . '>' . $value->Name . '</option>';
      }
  echo'</select></td></tr>';
    $LehrerList = '<div class="Lehrer">';
    $protokollantCombo = '<tr><td>Protokollant</td><td><select name="Protokollant"><option value="0">------</option>';
    $moderatorCombos = [];
    $i = 0;
    while($i < 3) {
      $moderatorCombos[$i] = '<tr><td>Moderator ' . ($i+1) . '</td><td><select name="Moderator[$i]"><option value="0">------</option>';
      $i++;
    }
    foreach($Lehrer as $key => $value) {
      $anwesend = "";
      foreach($protokoll->ProtokollLehrer as $pLKey => $pLValue) {
        $pSelected = '';
        $mSelected = [];
        $i = 0;
        while($i < 3) {
          $mSelected[$i] = '';
          $i++;
        }
        if($value->ID === $pLValue->LehrerID) {
          if($pLValue->istProtokollant) {
            $protokollant = $value;
            $pSelected = ' selected';
          }
          if($pLValue->istModerator) {
            $mSelected[sizeof($Moderatoren)] = ' selected';
            $Moderatoren[sizeof($Moderatoren)] = $value;
          }
          if($pLValue->istAnwesend) {
            $anwesend = "checked";
          }
          break;
        }
      }
      $i = 0;
      while($i < 3) {
        $moderatorCombos[$i] .= '<option value="' . $value->ID . '"' . $mSelected[$i] . '>' . $value->Nachname . ', ' . $value->Vorname . '</option>';
        $i++;
      }
      $protokollantCombo .= '<option value="' . $value->ID . '"' . $pSelected . '>' . $value->Nachname . ', ' . $value->Vorname . '</option>';
      $LehrerList .= '<div class="inline"><div><input class="lehrer-checkbox" type="checkbox" name="ProtokollLehrer[]" value="' . $value->ID . '" ' . $anwesend . '>' . $value->Nachname . ', ' . $value->Vorname . '</div></div>';
    }
    $protokollantCombo .= '</select></td></tr>';
    echo $protokollantCombo;

    $i = 0;
    while($i < 3) {
      echo $moderatorCombos[$i] . '</select></td></tr>';
      $i++;
    }
    echo '</table>';
    $LehrerList .= '</div>';
    
    echo $LehrerList;
  echo'<h2>Themen</h2>';
    $i = 0;

    foreach($Topic as $key => $value) {
      if($value->Beschluss !== "") {
        $Beschlossen = "checked";
        $BVisibilty = "";
        $class="opened";
      } else {
        $Beschlossen = "";
        $BVisibilty = "visibility: collapse;";
        $class="closed";
      }
      echo '<input type="hidden" name="Topic[' . $i . '][ID]" value="'. $value->ID .'">';
      echo '<h4>Thema ' . ($i+1) . '</h4>';
      echo '<table class="Topic">';
      echo '<tr><td><label for="Topic[' . $i . '][Name]">Titel</label></td>
        <td><input type="text" name="Topic[' . $i . '][Name]" value="' . $value->Name . '"></td></tr>';
      echo '<tr><td><label for="Topic[' . $i . '][Beschreibung]">Beschreibung</label></td>
        <td><textarea name="Topic[' . $i . '][Beschreibung]">' . $value->Beschreibung . '</textarea></td></tr>';
      echo '<tr><td><label for="' . $i . '_Beschlossen">Beschlossen</label></td>
        <td><input type="checkbox" onClick="ToggleRows('.$i.')" name="' . $i . '_Beschlossen" ' . $Beschlossen . '></tr>';
      echo '<tr class="toggleRow'.$i.' '.$class.'" style="' . $BVisibilty . '" false"><td><label for="Topic[' . $i . '][Beschluss]">Beschluss*</label></td>
        <td><textarea name="Topic[' . $i . '][Beschluss]">' . $value->Beschluss . '</textarea></td></tr>';
      echo '<tr class="toggleRow'.$i.' '.$class.'" style="' . $BVisibilty . '"><td><label for="Topic[' . $i . '][Dafuer]">Dafür</label></td>
        <td><input type="Number" name="Topic[' . $i . '][Dafuer]" value ="' . $value->Dafuer . '"></td></tr>';
      echo '<tr class="toggleRow'.$i.' '.$class.'" style="' . $BVisibilty . '"><td><label for="Topic[' . $i . '][Dagegen]">Dagegen</label></td>
        <td><input type="Number" name="Topic[' . $i . '][Dagegen]" value ="' . $value->Dagegen . '"></td></tr>';
      echo '<tr class="toggleRow'.$i.' '.$class.'" style="' . $BVisibilty . '"><td><label for="Topic[' . $i . '][Enthalten]">Enthalten</label></td>
        <td><input type="Number" name="Topic[' . $i . '][Enthalten]" value ="' . $value->Enthalten . '"></td></tr>';
      echo '</table>';
      $i++;
    }
    echo '<button type="submit" name="action" value="addTop">Thema Hinzufügen</button><button type="submit" name="action" value="save" style="float: right;">Übernehmen</button>';
  echo'</form>';

}
?>